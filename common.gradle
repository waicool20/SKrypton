import org.gradle.internal.os.OperatingSystem

OperatingSystem currentOS = OperatingSystem.current()

static Boolean is32Bit() {
    return !is64Bit()
}

static Boolean is64Bit() {
    return System.getProperty("os.arch").contains("64")
}

static Boolean commandExists(String command) {
    try {
        Runtime.runtime.exec(command)
        return true
    } catch (Exception ignored) {
        return false
    }
}

ext {
    ext.isLinux = currentOS.isLinux()
    ext.isWindows = currentOS.isWindows()
    ext.isMacOsX = currentOS.isMacOsX()
    ext.isUnix = currentOS.isUnix()
    ext.is32Bit = is32Bit()
    ext.is64Bit = is64Bit()
    ext.commandExists = this.&commandExists

    if (currentOS.isLinux()) {
        ext.osName = "Linux"
    } else if(currentOS.isWindows()) {
        ext.osName = "Windows"
    } else if(currentOS.isMacOsX()) {
        ext.osName = "MacOsX"
    } else {
        ext.osName = "Unknown"
    }
}
